package com.cdm.pages;

import java.util.ArrayList;
import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.support.FindBy;

import com.aventstack.extentreports.ExtentTest;
import com.cdm.common.CommonActions;

public class Pagination extends CommonActions {

	public Pagination(WebDriver driver, ExtentTest logger) {
		super(driver, logger);
		// TODO Auto-generated constructor stub
	}

	@FindBy(xpath = "//table[@class='mat-table cdk-table mat-sort']")
	List<WebElement> tableList;

	@FindBy(xpath = "//button[@aria-label='Next page']")
	WebElement nextButton;

	@FindBy(xpath = "//mat-select[@id= 'mat-select-0']")
	WebElement paginationRecordDropdown;

	String nextbuttonClassName = nextButton.getAttribute("class");

	@FindBy(xpath = "//div[@class='mat-paginator-range-label']")
	WebElement paginationRecordLabel;

	public void identifyNumberOfElementsonPage() throws Exception {
		
		

		List<WebElement> nameWebElements = tableList;

		List<String> names = new ArrayList<String>();

		while (nextbuttonClassName.contains("disabled")) {
			for (WebElement namesWebElement : nameWebElements) {

				names.add(namesWebElement.getText());
			}

		}

		// printing the whole list elements

		for (String name : names) {

			System.out.println(name);

		}

		// counting the size of the list

		int actualCount = names.size();

		System.out.println("Total number of names :" + actualCount);

		// locating displayed count

		String displayedCountString = paginationRecordLabel.getText().split(" ")[5];

		int displayedCount = Integer.parseInt(displayedCountString);

		System.out.println("Total Number of Displayed Names count:" + displayedCount);

		Thread.sleep(1000);

		// Actual count calculated Vs Dispalyed Count

		if (actualCount == displayedCount) {

			System.out.println("Actual row count = Displayed row Count");

		} else {

			System.out.println("Actual row count !=  Displayed row Count");

			throw new Exception("Actual row count !=  Displayed row Count");

		}

	}
	
	
	public void SelectPageMatOption(String value) {
		SelectMatOption(paginationRecordDropdown,value);
	}

}


